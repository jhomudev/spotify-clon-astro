---
import MusicsTable from "@/components/MusicsTable.astro"
import CardPlayButton from "@/components/CardPlayButton"
import Layout from "@/layouts/Layout.astro"
import { allPlaylists, songs } from "@/lib/data"

const { id } = Astro.params
const playlist = allPlaylists.find((playlist) => playlist.id === id)
const playlistSongs = songs.filter((song) => song.albumId === playlist?.albumId)
---

<Layout title="Spotify clon">
  <div
    id="playlist-container"
    class="relative flex flex-col h-full transition-all duration-1000 bg-zinc-900 py-6 rounded-lg overflow-x-hidden"
    style=`background-color: ${playlist?.color.accent};`
    transition:name=`playlist ${id} box`
  >
    <!-- PageHeader -->
    <div class="z-20">
      <header class="flex items-end gap-8 px-6 pb-6 mt-6">
        <picture
          class="aspect-square w-52 rounded-lg overflow-hidden shadow-lg"
        >
          <img
            src={playlist?.cover}
            alt=`Cover of ${playlist?.title}`
            transition:name=`playlist ${playlist?.id} image`
          />
        </picture>
        <div class="data flex flex-col gap-2 justify-start">
          <small class="text-sm">Playlist</small>
          <h1
            class="text-2xl md:text-3xl lg:text-4xl xl:text-7xl font-semibold"
            transition:name=`playlist ${playlist?.id} title`
          >
            {playlist?.title}
          </h1>
          <p
            class="text-zinc-400"
            transition:name=`playlist ${playlist?.id} artists`
          >
            {playlist?.artists.join(", ")}
          </p>
          <p><span class="text-white">5 canciones</span>, 3h aproximadamente</p>
        </div>
      </header>
      <div class="flex items-center gap-3 px-6 py-3">
        <CardPlayButton client:load playlistId={playlist!.id} size="lg" />
      </div>
      <div class="relative z-10 px-6 py-2 bg-zinc-900/20">
        <div class="flex gap-3 flex-wrap">
          <MusicsTable songs={playlistSongs} />
        </div>
      </div>
    </div>
    <div
      class="absolute inset-0 bg-gradient-to-t from-zinc-900 via-zinc-900/80 z-10"
    >
    </div>
  </div>
</Layout>

<style></style>
